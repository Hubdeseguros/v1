(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2704:function(e,s,r){Promise.resolve().then(r.bind(r,6374))},6374:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return m}});var t=r(9950),a=r(2371),i=r(7437),n=r(2265),l=r(9376),o=r(7648),c=r(2141),d=r(6175);function u(){let[e,s]=(0,n.useState)({email:"",password:""}),[r,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[f,v]=(0,n.useState)(!1),w=(0,l.useRouter)();(0,n.useEffect)(()=>((async()=>{try{let e=(0,c.Ng)();if(!e)throw Error("No se pudo inicializar el cliente de Supabase");v(!0);let{data:{session:s},error:r}=await e.auth.getSession();if(r)throw r;if(s){w.push("/dashboard");return}}catch(e){u("Error al conectar con el servidor. Por favor, recarga la p\xe1gina.")}finally{p(!0)}})(),()=>{p(!1)}),[w]);let g=(0,n.useCallback)(()=>e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)?!!e.password||(u("La contrase\xf1a es obligatoria"),!1):(u("Por favor ingresa un correo electr\xf3nico v\xe1lido"),!1):(u("El correo electr\xf3nico es obligatorio"),!1),[e]),j=(0,n.useCallback)(async s=>{if(s.preventDefault(),u(""),!h||!f){u("El sistema est\xe1 iniciando. Por favor, int\xe9ntalo de nuevo en unos segundos.");return}if(g())try{x(!0);let s=(0,c.Ng)();if(!s)throw Error("No se pudo inicializar el cliente de autenticaci\xf3n");let{data:r,error:t}=await s.auth.signInWithPassword({email:e.email.trim(),password:e.password});if(t)throw t;d.Am.success("\xa1Inicio de sesi\xf3n exitoso!"),w.push("/dashboard")}catch(s){var r,t,a,i;let e="Error al iniciar sesi\xf3n. Por favor, int\xe9ntalo de nuevo m\xe1s tarde.";(null==s?void 0:null===(r=s.message)||void 0===r?void 0:r.includes("Invalid login credentials"))?e="Correo o contrase\xf1a incorrectos. Por favor, int\xe9ntalo de nuevo.":(null==s?void 0:null===(t=s.message)||void 0===t?void 0:t.includes("Email not confirmed"))?e="Por favor verifica tu correo electr\xf3nico antes de iniciar sesi\xf3n.":(null==s?void 0:null===(a=s.message)||void 0===a?void 0:a.includes("NetworkError"))?e="Error de conexi\xf3n. Por favor, verifica tu conexi\xf3n a internet.":(null==s?void 0:null===(i=s.message)||void 0===i?void 0:i.includes("Failed to fetch"))&&(e="No se pudo conectar al servidor. Por favor, verifica tu conexi\xf3n."),u(e),d.Am.error(e)}finally{h&&x(!1)}},[e,g,w,h]),b=(0,n.useCallback)(e=>{let{name:i,value:n}=e.target;s(e=>(0,a._)((0,t._)({},e),{[i]:n})),r&&u("")},[r]);return h&&f?(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsxs)("div",{className:"text-center mb-10",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hubseguros"}),(0,i.jsx)("h3",{className:"text-xl font-medium",children:"Iniciar sesi\xf3n"}),(0,i.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Ingresa tus credenciales para acceder a la plataforma"})]}),r&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 text-sm rounded-md",children:r}),(0,i.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electr\xf3nico"}),(0,i.jsx)("input",{id:"email",name:"email",type:"email",value:e.email,onChange:b,disabled:m,autoComplete:"email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ejemplo@correo.com"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,i.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contrase\xf1a"}),(0,i.jsx)(o.default,{href:"/recuperar-password",className:"text-sm text-primary hover:text-secondary",children:"\xbfOlvidaste tu contrase\xf1a?"})]}),(0,i.jsx)("input",{id:"password",name:"password",type:"password",value:e.password,onChange:b,disabled:m,autoComplete:"current-password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••"})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{type:"submit",disabled:m,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Iniciando sesi\xf3n...":"Iniciar sesi\xf3n"})})]}),(0,i.jsxs)("div",{className:"mt-6 text-center",children:[(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["\xbfNo tienes una cuenta?"," ",(0,i.jsx)(o.default,{href:"/registro",className:"font-medium text-primary hover:text-secondary",children:"Reg\xedstrate"})]}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-4",children:["Acceso demo: ",(0,i.jsx)("span",{className:"font-medium",children:"admin@admin.com / admin123"})]})]})]}):(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Inicializando la aplicaci\xf3n..."})]})})}function m(){return(0,i.jsxs)("div",{className:"min-h-screen flex flex-col md:flex-row",children:[(0,i.jsx)("div",{className:"w-full md:w-1/2 bg-primary flex flex-col justify-center p-8 md:p-16",children:(0,i.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"Bienvenido a Hubseguros"}),(0,i.jsx)("p",{className:"text-white/80 mb-8",children:"La plataforma digital para gestionar y hacer crecer tu negocio de seguros."}),(0,i.jsxs)("ul",{className:"space-y-4",children:[(0,i.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("span",{children:"Organiza tu cartera de clientes y p\xf3lizas"})]}),(0,i.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("span",{children:"Ahorra tiempo en tareas administrativas"})]}),(0,i.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("span",{children:"Impulsa tus ventas con herramientas inteligentes"})]}),(0,i.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("span",{children:"Soporte humano cuando lo necesites"})]})]})]})}),(0,i.jsx)("div",{className:"w-full md:w-1/2 flex items-center justify-center p-8 md:p-16 bg-white",children:(0,i.jsx)(u,{})})]})}},2141:function(e,s,r){"use strict";r.d(s,{Ng:function(){return m},OQ:function(){return x}});var t=r(9950),a=r(2371),i=r(7026),n=r(257);let l="https://vcoynbjctbfyavxnyhmp.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZjb3luYmpjdGJmeWF2eG55aG1wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyNzY4ODUsImV4cCI6MjA2Mzg1Mjg4NX0.q_5pNpcOSBpqjTkgIWoplGDc6LZlZIvTD3zeuR3lN2Q",c=n.env.SUPABASE_SERVICE_ROLE_KEY||"",d={auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",debug:!1},global:{headers:{"X-Client-Info":"hubseguros/1.0.0"}}},u=()=>{try{if(!l||!o)return null;return(0,i.eI)(l,o,d)}catch(e){return null}},m=u,x=u();(()=>{try{if(!l||!c)return null;return(0,i.eI)(l,c,(0,a._)((0,t._)({},d),{auth:(0,a._)((0,t._)({},d.auth),{autoRefreshToken:!1,persistSession:!1})}))}catch(e){return null}})()}},function(e){e.O(0,[972,830,810,971,117,744],function(){return e(e.s=2704)}),_N_E=e.O()}]);