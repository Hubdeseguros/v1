(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7265:function(e,r,t){Promise.resolve().then(t.bind(t,6374))},6374:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var s=t(5583),a=t(1780),l=t(7437),i=t(7648),n=t(9376),o=t(2265),u=t(3512);function d(){let e=(0,n.useRouter)(),{signIn:r,error:t,loading:d}=(0,u.a)(),[c,m]=(0,o.useState)(""),[h,f]=(0,o.useState)({email:"admin@admin.com",password:"admin123"}),x=async t=>{t.preventDefault(),m("");let{error:s}=await r(h.email,h.password);if(s){m(s);return}e.push("/dashboard")},p=e=>{let{name:r,value:t}=e.target;f(e=>(0,a._)((0,s._)({},e),{[r]:t}))};return(0,l.jsxs)("div",{className:"w-full max-w-md",children:[(0,l.jsxs)("div",{className:"text-center mb-10",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hubseguros"}),(0,l.jsx)("h3",{className:"text-xl font-medium",children:"Iniciar sesi\xf3n"}),(0,l.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Ingresa tus credenciales para acceder a la plataforma"})]}),(c||t)&&(0,l.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 text-sm rounded-md",children:c||t}),(0,l.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electr\xf3nico"}),(0,l.jsx)("input",{id:"email",name:"email",type:"email",value:h.email,onChange:p,disabled:d,autoComplete:"email",required:!0,className:"input-field w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ejemplo@correo.com"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,l.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contrase\xf1a"}),(0,l.jsx)(i.default,{href:"/recuperar-password",className:"text-sm text-primary hover:text-secondary",children:"\xbfOlvidaste tu contrase\xf1a?"})]}),(0,l.jsx)("input",{id:"password",name:"password",type:"password",value:h.password,onChange:p,disabled:d,autoComplete:"current-password",required:!0,className:"input-field w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••"})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"submit",disabled:d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Iniciando sesi\xf3n...":"Iniciar sesi\xf3n"})})]}),(0,l.jsxs)("div",{className:"mt-6 text-center",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["\xbfNo tienes una cuenta? ",(0,l.jsx)(i.default,{href:"/registro",className:"font-medium text-primary hover:text-secondary",children:"Reg\xedstrate"})]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500 mt-4",children:["Acceso demo: ",(0,l.jsx)("span",{className:"font-medium",children:"admin@admin.com / admin123"})]})]})]})}function c(){let[e,r]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{r(!0)},[]),e)?(0,l.jsxs)("div",{className:"min-h-screen flex flex-col md:flex-row",children:[(0,l.jsx)("div",{className:"w-full md:w-1/2 bg-primary flex flex-col justify-center p-8 md:p-16",children:(0,l.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"Bienvenido a Hubseguros"}),(0,l.jsx)("p",{className:"text-white/80 mb-8",children:"La plataforma digital para gestionar y hacer crecer tu negocio de seguros."}),(0,l.jsxs)("ul",{className:"space-y-4",children:[(0,l.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,l.jsx)("span",{children:"Organiza tu cartera de clientes y p\xf3lizas"})]}),(0,l.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,l.jsx)("span",{children:"Ahorra tiempo en tareas administrativas"})]}),(0,l.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,l.jsx)("span",{children:"Impulsa tus ventas con herramientas inteligentes"})]}),(0,l.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,l.jsx)("span",{children:"Soporte humano cuando lo necesites"})]})]})]})}),(0,l.jsx)("div",{className:"w-full md:w-1/2 flex items-center justify-center p-8 md:p-16 bg-white",children:(0,l.jsx)(d,{})})]}):(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsx)("div",{className:"animate-pulse text-gray-500",children:"Cargando..."})})}},3512:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return c},a:function(){return m}});var s=t(7437),a=t(2265),l=t(9376),i=t(7026);let n="https://vcoynbjctbfyavxnyhmp.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZjb3luYmpjdGJmeWF2eG55aG1wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyNzY4ODUsImV4cCI6MjA2Mzg1Mjg4NX0.q_5pNpcOSBpqjTkgIWoplGDc6LZlZIvTD3zeuR3lN2Q";if(!n||!o)throw Error("Missing Supabase configuration");let u=(0,i.eI)(n,o),d=(0,a.createContext)(void 0);function c(e){let{children:r}=e,[t,i]=(0,a.useState)(null),[n,o]=(0,a.useState)(!0),[c,m]=(0,a.useState)(null),h=(0,l.useRouter)(),f=(0,l.usePathname)();(0,a.useEffect)(()=>{(async()=>{try{o(!0);let{data:{session:r},error:t}=await u.auth.getSession();if(t)throw t;if(null==r?void 0:r.user){var e;let{data:t,error:s}=await u.from("profiles").select("*").eq("id",r.user.id).single();if(s)throw s;i({id:r.user.id,email:r.user.email,user_metadata:{full_name:(null==t?void 0:t.full_name)||(null===(e=r.user.email)||void 0===e?void 0:e.split("@")[0]),avatar_url:null==t?void 0:t.avatar_url},role:(null==t?void 0:t.role)||"CLIENTE"})}else i(null),"/"===f||f.startsWith("/login")||f.startsWith("/recuperar-password")||h.push("/login")}catch(e){}finally{o(!1)}})();let{data:{subscription:e}}=u.auth.onAuthStateChange(async(e,r)=>{if(null==r?void 0:r.user){var t;let{data:e}=await u.from("profiles").select("*").eq("id",r.user.id).single();i({id:r.user.id,email:r.user.email,user_metadata:{full_name:(null==e?void 0:e.full_name)||(null===(t=r.user.email)||void 0===t?void 0:t.split("@")[0]),avatar_url:null==e?void 0:e.avatar_url},role:(null==e?void 0:e.role)||"CLIENTE"})}else i(null),"/"===f||f.startsWith("/login")||f.startsWith("/recuperar-password")||h.push("/login")});return()=>{null==e||e.unsubscribe()}},[f,h]);let x=async(e,r)=>{o(!0),m(null);try{let{data:t,error:s}=await u.auth.signInWithPassword({email:e,password:r});if(s)throw Error(s.message||"Error al iniciar sesi\xf3n");if(null==t?void 0:t.user){let{data:e,error:r}=await u.from("profiles").select("*").eq("id",t.user.id).single();if(r)throw r;i({id:t.user.id,email:t.user.email||"",user_metadata:{full_name:(null==e?void 0:e.full_name)||"",avatar_url:null==e?void 0:e.avatar_url},role:(null==e?void 0:e.role)||"CLIENTE"})}return{error:null}}catch(r){let e=r.message||"Error al iniciar sesi\xf3n";return m(e),{error:e}}finally{o(!1)}},p=async(e,r,t)=>{o(!0),m(null);try{let{data:s,error:a}=await u.auth.signUp({email:e,password:r,options:{data:{full_name:t.full_name}}});if(a)throw a;if(s.user){let{error:r}=await u.from("profiles").insert([{id:s.user.id,email:e,full_name:t.full_name,role:"CLIENTE"}]);if(r)throw r;i({id:s.user.id,email:s.user.email||"",user_metadata:{full_name:t.full_name},role:"CLIENTE"})}return{error:null}}catch(r){let e=r.message||"Error al registrar el usuario";return m(e),{error:e}}finally{o(!1)}},w=async e=>{o(!0),m(null);try{let{error:r}=await u.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/update-password")});if(r)throw r;return{error:null}}catch(r){let e=r.message||"Error al enviar el correo de recuperaci\xf3n";return m(e),{error:e}}finally{o(!1)}},g=async()=>{try{i(null),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[r]=e.trim().split("=");document.cookie="".concat(r,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")}),u.auth.signOut().catch(e=>{}),h.push("https://hubdeseguros.github.io/v1/login/"),window.location.href="https://hubdeseguros.github.io/v1/login/"}catch(e){window.location.href="https://hubdeseguros.github.io/v1/login/"}};return(0,s.jsx)(d.Provider,{value:{user:t,loading:n,error:c,signIn:x,signUp:p,signOut:g,resetPassword:w},children:r})}function m(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth debe usarse dentro de un AuthProvider");return e}},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return a.a}});var s=t(2972),a=t.n(s)}},function(e){e.O(0,[972,330,971,117,744],function(){return e(e.s=7265)}),_N_E=e.O()}]);