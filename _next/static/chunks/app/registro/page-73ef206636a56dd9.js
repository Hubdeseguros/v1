(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{3466:function(e,r,t){Promise.resolve().then(t.bind(t,4211))},4211:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var a=t(5583),s=t(1780),i=t(7437),l=t(2265),o=t(9376),n=t(575),u=t(7648),d=t(2141);function c(){let[e,r]=(0,l.useState)({nombre:"",email:"",password:"",confirmPassword:""}),[t,c]=(0,l.useState)(""),{signUp:m}=(0,n.a)(),h=(0,o.useRouter)(),[f,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{let{data:{session:e}}=await d.O.auth.getSession();(null==e?void 0:e.user)&&h.push("/dashboard")})()},[h]);let x=e=>{let{name:t,value:i}=e.target;r(e=>(0,s._)((0,a._)({},e),{[t]:i}))},w=async r=>{if(r.preventDefault(),c(""),e.password!==e.confirmPassword){c("Las contrase\xf1as no coinciden");return}if(e.password.length<6){c("La contrase\xf1a debe tener al menos 6 caracteres");return}try{p(!0);let{error:r}=await m(e.email,e.password,{full_name:e.nombre});if(r)throw Error(r);h.push("/verificar-email");return}catch(e){c(e.message||"Error al registrar el usuario. Por favor, int\xe9ntalo de nuevo.")}finally{p(!1)}};return(0,i.jsxs)("div",{className:"min-h-screen flex flex-col md:flex-row",children:[(0,i.jsx)("div",{className:"w-full md:w-1/2 bg-primary flex flex-col justify-center p-8 md:p-16",children:(0,i.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"\xdanete a HubSeguros"}),(0,i.jsx)("p",{className:"text-white/80 mb-8",children:"Crea tu cuenta y comienza a potenciar tu negocio de seguros con nuestra plataforma."}),(0,i.jsxs)("ul",{className:"space-y-4",children:[(0,i.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("span",{children:"Acceso a herramientas especializadas"})]}),(0,i.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("span",{children:"Gesti\xf3n centralizada de todas tus p\xf3lizas"})]}),(0,i.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,i.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,i.jsx)("span",{children:"Reportes y an\xe1lisis de rendimiento"})]})]})]})}),(0,i.jsx)("div",{className:"w-full md:w-1/2 flex items-center justify-center p-8 md:p-16 bg-white",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsxs)("div",{className:"text-center mb-10",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hubseguros"}),(0,i.jsx)("h3",{className:"text-xl font-medium",children:"Crear cuenta"}),(0,i.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Completa tus datos para registrarte"})]}),t&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 text-sm rounded-md",children:t}),(0,i.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),(0,i.jsx)("input",{id:"nombre",name:"nombre",type:"text",value:e.nombre,onChange:x,autoComplete:"name",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Juan P\xe9rez",disabled:f})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electr\xf3nico"}),(0,i.jsx)("input",{id:"email",name:"email",type:"email",value:e.email,onChange:x,autoComplete:"email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ejemplo@correo.com",disabled:f})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a"}),(0,i.jsx)("input",{id:"password",name:"password",type:"password",value:e.password,onChange:x,autoComplete:"new-password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",disabled:f})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar contrase\xf1a"}),(0,i.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:e.confirmPassword,onChange:x,autoComplete:"new-password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",disabled:f})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,i.jsxs)("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700",children:["Acepto los"," ",(0,i.jsx)(u.default,{href:"https://hubdeseguros.github.io/v1/terminos",className:"text-primary hover:text-secondary cursor-pointer",onClick:e=>{e.preventDefault(),window.location.href="https://hubdeseguros.github.io/v1/terminos"},children:"t\xe9rminos y condiciones"})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{type:"submit",disabled:f,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Creando cuenta...":"Crear cuenta"})})]}),(0,i.jsx)("div",{className:"mt-6 text-center",children:(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["\xbfYa tienes cuenta?"," ",(0,i.jsx)(u.default,{href:"/login",className:"font-medium text-primary hover:text-secondary cursor-pointer",children:"Inicia sesi\xf3n"})]})})]})})]})}},575:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return n},a:function(){return u}});var a=t(7437),s=t(2265),i=t(9376),l=t(2141);let o=(0,s.createContext)(void 0);function n(e){let{children:r}=e,[t,n]=(0,s.useState)(null),[u,d]=(0,s.useState)(!0),[c,m]=(0,s.useState)(null),h=(0,i.useRouter)(),f=(0,i.usePathname)();(0,s.useEffect)(()=>{(async()=>{try{d(!0);let{data:{session:r},error:t}=await l.O.auth.getSession();if(t)throw t;if(null==r?void 0:r.user){var e;let{data:t,error:a}=await l.O.from("profiles").select("*").eq("id",r.user.id).single();if(a)throw a;n({id:r.user.id,email:r.user.email,user_metadata:{full_name:(null==t?void 0:t.full_name)||(null===(e=r.user.email)||void 0===e?void 0:e.split("@")[0]),avatar_url:null==t?void 0:t.avatar_url},role:(null==t?void 0:t.role)||"CLIENTE"})}else n(null),["/","/login","/registro","/recuperar-password"].some(e=>f===e||f.startsWith("".concat(e,"/")))||h.push("/login")}catch(e){}finally{d(!1)}})();let{data:{subscription:e}}=l.O.auth.onAuthStateChange(async(e,r)=>{if(null==r?void 0:r.user){var t;let{data:e}=await l.O.from("profiles").select("*").eq("id",r.user.id).single();n({id:r.user.id,email:r.user.email,user_metadata:{full_name:(null==e?void 0:e.full_name)||(null===(t=r.user.email)||void 0===t?void 0:t.split("@")[0]),avatar_url:null==e?void 0:e.avatar_url},role:(null==e?void 0:e.role)||"CLIENTE"})}else n(null),["/","/login","/registro","/recuperar-password"].some(e=>f===e||f.startsWith("".concat(e,"/")))||h.push("/login")});return()=>{null==e||e.unsubscribe()}},[f,h]);let p=async(e,r)=>{d(!0),m(null);try{let{data:t,error:a}=await l.O.auth.signInWithPassword({email:e,password:r});if(a)throw Error(a.message||"Error al iniciar sesi\xf3n");if(null==t?void 0:t.user){let{data:e,error:r}=await l.O.from("profiles").select("*").eq("id",t.user.id).single();if(r)throw r;n({id:t.user.id,email:t.user.email||"",user_metadata:{full_name:(null==e?void 0:e.full_name)||"",avatar_url:null==e?void 0:e.avatar_url},role:(null==e?void 0:e.role)||"CLIENTE"})}return{error:null}}catch(r){let e=r.message||"Error al iniciar sesi\xf3n";return m(e),{error:e}}finally{d(!1)}},x=async(e,r,t)=>{d(!0),m(null);try{let{data:a,error:s}=await l.O.from("profiles").select("id").eq("email",e).single();if(a&&!s)throw Error("Este correo electr\xf3nico ya est\xe1 registrado");let{data:i,error:o}=await l.O.auth.signUp({email:e,password:r,options:{data:{full_name:t.full_name,email_redirect_to:"".concat(window.location.origin,"/dashboard")},emailRedirectTo:"".concat(window.location.origin,"/dashboard")}});if(o)throw o;if(i.user){let{error:r}=await l.O.from("profiles").insert([{id:i.user.id,email:e.toLowerCase().trim(),full_name:t.full_name.trim(),role:"CLIENTE",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(r)throw Error("Error al crear el perfil del usuario")}return{error:null}}catch(r){let e=r.message||"Error al registrar el usuario";return m(e),{error:e}}finally{d(!1)}},w=async e=>{d(!0),m(null);try{let{error:r}=await l.O.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/update-password")});if(r)throw r;return{error:null}}catch(r){let e=r.message||"Error al enviar el correo de recuperaci\xf3n";return m(e),{error:e}}finally{d(!1)}},g=async()=>{try{n(null),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[r]=e.trim().split("=");document.cookie="".concat(r,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")}),l.O.auth.signOut().catch(e=>{}),h.push("https://hubdeseguros.github.io/v1/login/"),window.location.href="https://hubdeseguros.github.io/v1/login/"}catch(e){window.location.href="https://hubdeseguros.github.io/v1/login/"}};return(0,a.jsx)(o.Provider,{value:{user:t,loading:u,error:c,signIn:p,signUp:x,signOut:g,resetPassword:w},children:r})}function u(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth debe usarse dentro de un AuthProvider");return e}},2141:function(e,r,t){"use strict";t.d(r,{O:function(){return l}});var a=t(7026);let s="https://vcoynbjctbfyavxnyhmp.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZjb3luYmpjdGJmeWF2eG55aG1wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyNzY4ODUsImV4cCI6MjA2Mzg1Mjg4NX0.q_5pNpcOSBpqjTkgIWoplGDc6LZlZIvTD3zeuR3lN2Q";if(!s||!i)throw Error("Missing Supabase configuration");let l=(0,a.eI)(s,i)},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return s.a}});var a=t(2972),s=t.n(a)}},function(e){e.O(0,[972,330,971,117,744],function(){return e(e.s=3466)}),_N_E=e.O()}]);