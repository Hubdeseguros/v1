(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{3466:function(e,r,t){Promise.resolve().then(t.bind(t,4211))},4211:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return u}});var a=t(5583),s=t(1780),l=t(7437),o=t(2265),i=t(9376),n=t(3512),d=t(7648);function u(){let[e,r]=(0,o.useState)({nombre:"",email:"",password:"",confirmPassword:""}),[t,u]=(0,o.useState)(""),[c,m]=(0,o.useState)(!1),{signUp:h,user:f}=(0,n.a)(),p=(0,i.useRouter)();(0,o.useEffect)(()=>{f&&p.push("/dashboard")},[f,p]);let x=e=>{let{name:t,value:l}=e.target;r(e=>(0,s._)((0,a._)({},e),{[t]:l}))},w=async r=>{if(r.preventDefault(),u(""),e.password!==e.confirmPassword){u("Las contrase\xf1as no coinciden");return}if(e.password.length<6){u("La contrase\xf1a debe tener al menos 6 caracteres");return}try{m(!0);let{error:r}=await h(e.email,e.password,{full_name:e.nombre});if(r)throw Error(r);p.push("/verificar-email")}catch(e){u(e.message||"Error al registrar el usuario. Por favor, int\xe9ntalo de nuevo.")}finally{m(!1)}};return(0,l.jsxs)("div",{className:"min-h-screen flex flex-col md:flex-row",children:[(0,l.jsx)("div",{className:"w-full md:w-1/2 bg-primary flex flex-col justify-center p-8 md:p-16",children:(0,l.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"\xdanete a HubSeguros"}),(0,l.jsx)("p",{className:"text-white/80 mb-8",children:"Crea tu cuenta y comienza a potenciar tu negocio de seguros con nuestra plataforma."}),(0,l.jsxs)("ul",{className:"space-y-4",children:[(0,l.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,l.jsx)("span",{children:"Acceso a herramientas especializadas"})]}),(0,l.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,l.jsx)("span",{children:"Gesti\xf3n centralizada de todas tus p\xf3lizas"})]}),(0,l.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,l.jsx)("span",{children:"Reportes y an\xe1lisis de rendimiento"})]})]})]})}),(0,l.jsx)("div",{className:"w-full md:w-1/2 flex items-center justify-center p-8 md:p-16 bg-white",children:(0,l.jsxs)("div",{className:"w-full max-w-md",children:[(0,l.jsxs)("div",{className:"text-center mb-10",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hubseguros"}),(0,l.jsx)("h3",{className:"text-xl font-medium",children:"Crear cuenta"}),(0,l.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Completa tus datos para registrarte"})]}),t&&(0,l.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 text-sm rounded-md",children:t}),(0,l.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),(0,l.jsx)("input",{id:"nombre",name:"nombre",type:"text",value:e.nombre,onChange:x,autoComplete:"name",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Juan P\xe9rez",disabled:c})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electr\xf3nico"}),(0,l.jsx)("input",{id:"email",name:"email",type:"email",value:e.email,onChange:x,autoComplete:"email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ejemplo@correo.com",disabled:c})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a"}),(0,l.jsx)("input",{id:"password",name:"password",type:"password",value:e.password,onChange:x,autoComplete:"new-password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",disabled:c})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar contrase\xf1a"}),(0,l.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:e.confirmPassword,onChange:x,autoComplete:"new-password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",disabled:c})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,l.jsxs)("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700",children:["Acepto los"," ",(0,l.jsx)(d.default,{href:"https://hubdeseguros.github.io/v1/terminos",className:"text-primary hover:text-secondary cursor-pointer",onClick:e=>{e.preventDefault(),window.location.href="https://hubdeseguros.github.io/v1/terminos"},children:"t\xe9rminos y condiciones"})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creando cuenta...":"Crear cuenta"})})]}),(0,l.jsx)("div",{className:"mt-6 text-center",children:(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["\xbfYa tienes cuenta?"," ",(0,l.jsx)(d.default,{href:"/login",className:"font-medium text-primary hover:text-secondary cursor-pointer",children:"Inicia sesi\xf3n"})]})})]})})]})}},3512:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return c},a:function(){return m}});var a=t(7437),s=t(2265),l=t(9376),o=t(7026);let i="https://vcoynbjctbfyavxnyhmp.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZjb3luYmpjdGJmeWF2eG55aG1wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyNzY4ODUsImV4cCI6MjA2Mzg1Mjg4NX0.q_5pNpcOSBpqjTkgIWoplGDc6LZlZIvTD3zeuR3lN2Q";if(!i||!n)throw Error("Missing Supabase configuration");let d=(0,o.eI)(i,n),u=(0,s.createContext)(void 0);function c(e){let{children:r}=e,[t,o]=(0,s.useState)(null),[i,n]=(0,s.useState)(!0),[c,m]=(0,s.useState)(null),h=(0,l.useRouter)(),f=(0,l.usePathname)();(0,s.useEffect)(()=>{(async()=>{try{n(!0);let{data:{session:r},error:t}=await d.auth.getSession();if(t)throw t;if(null==r?void 0:r.user){var e;let{data:t,error:a}=await d.from("profiles").select("*").eq("id",r.user.id).single();if(a)throw a;o({id:r.user.id,email:r.user.email,user_metadata:{full_name:(null==t?void 0:t.full_name)||(null===(e=r.user.email)||void 0===e?void 0:e.split("@")[0]),avatar_url:null==t?void 0:t.avatar_url},role:(null==t?void 0:t.role)||"CLIENTE"})}else o(null),["/","/login","/registro","/recuperar-password"].some(e=>f===e||f.startsWith("".concat(e,"/")))||h.push("/login")}catch(e){}finally{n(!1)}})();let{data:{subscription:e}}=d.auth.onAuthStateChange(async(e,r)=>{if(null==r?void 0:r.user){var t;let{data:e}=await d.from("profiles").select("*").eq("id",r.user.id).single();o({id:r.user.id,email:r.user.email,user_metadata:{full_name:(null==e?void 0:e.full_name)||(null===(t=r.user.email)||void 0===t?void 0:t.split("@")[0]),avatar_url:null==e?void 0:e.avatar_url},role:(null==e?void 0:e.role)||"CLIENTE"})}else o(null),["/","/login","/registro","/recuperar-password"].some(e=>f===e||f.startsWith("".concat(e,"/")))||h.push("/login")});return()=>{null==e||e.unsubscribe()}},[f,h]);let p=async(e,r)=>{n(!0),m(null);try{let{data:t,error:a}=await d.auth.signInWithPassword({email:e,password:r});if(a)throw Error(a.message||"Error al iniciar sesi\xf3n");if(null==t?void 0:t.user){let{data:e,error:r}=await d.from("profiles").select("*").eq("id",t.user.id).single();if(r)throw r;o({id:t.user.id,email:t.user.email||"",user_metadata:{full_name:(null==e?void 0:e.full_name)||"",avatar_url:null==e?void 0:e.avatar_url},role:(null==e?void 0:e.role)||"CLIENTE"})}return{error:null}}catch(r){let e=r.message||"Error al iniciar sesi\xf3n";return m(e),{error:e}}finally{n(!1)}},x=async(e,r,t)=>{n(!0),m(null);try{let{data:a,error:s}=await d.from("profiles").select("id").eq("email",e).single();if(a&&!s)throw Error("Este correo electr\xf3nico ya est\xe1 registrado");let{data:l,error:o}=await d.auth.signUp({email:e,password:r,options:{data:{full_name:t.full_name,email_redirect_to:"".concat(window.location.origin,"/dashboard")},emailRedirectTo:"".concat(window.location.origin,"/dashboard")}});if(o)throw o;if(l.user){let{error:r}=await d.from("profiles").insert([{id:l.user.id,email:e.toLowerCase().trim(),full_name:t.full_name.trim(),role:"CLIENTE",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]);if(r)throw Error("Error al crear el perfil del usuario")}return{error:null}}catch(r){let e=r.message||"Error al registrar el usuario";return m(e),{error:e}}finally{n(!1)}},w=async e=>{n(!0),m(null);try{let{error:r}=await d.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/update-password")});if(r)throw r;return{error:null}}catch(r){let e=r.message||"Error al enviar el correo de recuperaci\xf3n";return m(e),{error:e}}finally{n(!1)}},g=async()=>{try{o(null),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[r]=e.trim().split("=");document.cookie="".concat(r,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")}),d.auth.signOut().catch(e=>{}),h.push("https://hubdeseguros.github.io/v1/login/"),window.location.href="https://hubdeseguros.github.io/v1/login/"}catch(e){window.location.href="https://hubdeseguros.github.io/v1/login/"}};return(0,a.jsx)(u.Provider,{value:{user:t,loading:i,error:c,signIn:p,signUp:x,signOut:g,resetPassword:w},children:r})}function m(){let e=(0,s.useContext)(u);if(void 0===e)throw Error("useAuth debe usarse dentro de un AuthProvider");return e}},7648:function(e,r,t){"use strict";t.d(r,{default:function(){return s.a}});var a=t(2972),s=t.n(a)}},function(e){e.O(0,[972,330,971,117,744],function(){return e(e.s=3466)}),_N_E=e.O()}]);