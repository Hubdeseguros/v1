(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{3466:function(e,r,s){Promise.resolve().then(s.bind(s,4211))},4211:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return d}});var t=s(5583),a=s(1780),l=s(7437),i=s(2265),o=s(9376),n=s(3512),u=s(7648);function d(){let[e,r]=(0,i.useState)({nombre:"",email:"",password:"",confirmPassword:""}),[s,d]=(0,i.useState)(""),[c,m]=(0,i.useState)(!1),{signUp:h}=(0,n.a)();(0,o.useRouter)();let f=e=>{let{name:s,value:l}=e.target;r(e=>(0,a._)((0,t._)({},e),{[s]:l}))},p=async r=>{if(r.preventDefault(),d(""),e.password!==e.confirmPassword){d("Las contrase\xf1as no coinciden");return}if(e.password.length<6){d("La contrase\xf1a debe tener al menos 6 caracteres");return}try{m(!0);let{error:r}=await h(e.email,e.password,{full_name:e.nombre});if(r)throw Error(r);window.location.href="https://hubdeseguros.github.io/v1/dashboard"}catch(e){d(e.message||"Error al registrar el usuario. Por favor, int\xe9ntalo de nuevo.")}finally{m(!1)}};return(0,l.jsxs)("div",{className:"min-h-screen flex flex-col md:flex-row",children:[(0,l.jsx)("div",{className:"w-full md:w-1/2 bg-primary flex flex-col justify-center p-8 md:p-16",children:(0,l.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"\xdanete a HubSeguros"}),(0,l.jsx)("p",{className:"text-white/80 mb-8",children:"Crea tu cuenta y comienza a potenciar tu negocio de seguros con nuestra plataforma."}),(0,l.jsxs)("ul",{className:"space-y-4",children:[(0,l.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,l.jsx)("span",{children:"Acceso a herramientas especializadas"})]}),(0,l.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,l.jsx)("span",{children:"Gesti\xf3n centralizada de todas tus p\xf3lizas"})]}),(0,l.jsxs)("li",{className:"flex items-center text-white/90",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-3 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,l.jsx)("span",{children:"Reportes y an\xe1lisis de rendimiento"})]})]})]})}),(0,l.jsx)("div",{className:"w-full md:w-1/2 flex items-center justify-center p-8 md:p-16 bg-white",children:(0,l.jsxs)("div",{className:"w-full max-w-md",children:[(0,l.jsxs)("div",{className:"text-center mb-10",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hubseguros"}),(0,l.jsx)("h3",{className:"text-xl font-medium",children:"Crear cuenta"}),(0,l.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Completa tus datos para registrarte"})]}),s&&(0,l.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 text-sm rounded-md",children:s}),(0,l.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo"}),(0,l.jsx)("input",{id:"nombre",name:"nombre",type:"text",value:e.nombre,onChange:f,autoComplete:"name",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Juan P\xe9rez",disabled:c})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Correo electr\xf3nico"}),(0,l.jsx)("input",{id:"email",name:"email",type:"email",value:e.email,onChange:f,autoComplete:"email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ejemplo@correo.com",disabled:c})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a"}),(0,l.jsx)("input",{id:"password",name:"password",type:"password",value:e.password,onChange:f,autoComplete:"new-password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",disabled:c})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar contrase\xf1a"}),(0,l.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:e.confirmPassword,onChange:f,autoComplete:"new-password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",disabled:c})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),(0,l.jsxs)("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700",children:["Acepto los"," ",(0,l.jsx)(u.default,{href:"https://hubdeseguros.github.io/v1/terminos",className:"text-primary hover:text-secondary cursor-pointer",onClick:e=>{e.preventDefault(),window.location.href="https://hubdeseguros.github.io/v1/terminos"},children:"t\xe9rminos y condiciones"})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Creando cuenta...":"Crear cuenta"})})]}),(0,l.jsx)("div",{className:"mt-6 text-center",children:(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["\xbfYa tienes cuenta?"," ",(0,l.jsx)(u.default,{href:"/login",className:"font-medium text-primary hover:text-secondary cursor-pointer",children:"Inicia sesi\xf3n"})]})})]})})]})}},3512:function(e,r,s){"use strict";s.d(r,{AuthProvider:function(){return c},a:function(){return m}});var t=s(7437),a=s(2265),l=s(9376),i=s(7026);let o="https://vcoynbjctbfyavxnyhmp.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZjb3luYmpjdGJmeWF2eG55aG1wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgyNzY4ODUsImV4cCI6MjA2Mzg1Mjg4NX0.q_5pNpcOSBpqjTkgIWoplGDc6LZlZIvTD3zeuR3lN2Q";if(!o||!n)throw Error("Missing Supabase configuration");let u=(0,i.eI)(o,n),d=(0,a.createContext)(void 0);function c(e){let{children:r}=e,[s,i]=(0,a.useState)(null),[o,n]=(0,a.useState)(!0),[c,m]=(0,a.useState)(null),h=(0,l.useRouter)(),f=(0,l.usePathname)();(0,a.useEffect)(()=>{(async()=>{try{n(!0);let{data:{session:r},error:s}=await u.auth.getSession();if(s)throw s;if(null==r?void 0:r.user){var e;let{data:s,error:t}=await u.from("profiles").select("*").eq("id",r.user.id).single();if(t)throw t;i({id:r.user.id,email:r.user.email,user_metadata:{full_name:(null==s?void 0:s.full_name)||(null===(e=r.user.email)||void 0===e?void 0:e.split("@")[0]),avatar_url:null==s?void 0:s.avatar_url},role:(null==s?void 0:s.role)||"CLIENTE"})}else i(null),["/","/login","/registro","/recuperar-password"].some(e=>f===e||f.startsWith("".concat(e,"/")))||h.push("/login")}catch(e){}finally{n(!1)}})();let{data:{subscription:e}}=u.auth.onAuthStateChange(async(e,r)=>{if(null==r?void 0:r.user){var s;let{data:e}=await u.from("profiles").select("*").eq("id",r.user.id).single();i({id:r.user.id,email:r.user.email,user_metadata:{full_name:(null==e?void 0:e.full_name)||(null===(s=r.user.email)||void 0===s?void 0:s.split("@")[0]),avatar_url:null==e?void 0:e.avatar_url},role:(null==e?void 0:e.role)||"CLIENTE"})}else i(null),["/","/login","/registro","/recuperar-password"].some(e=>f===e||f.startsWith("".concat(e,"/")))||h.push("/login")});return()=>{null==e||e.unsubscribe()}},[f,h]);let p=async(e,r)=>{n(!0),m(null);try{let{data:s,error:t}=await u.auth.signInWithPassword({email:e,password:r});if(t)throw Error(t.message||"Error al iniciar sesi\xf3n");if(null==s?void 0:s.user){let{data:e,error:r}=await u.from("profiles").select("*").eq("id",s.user.id).single();if(r)throw r;i({id:s.user.id,email:s.user.email||"",user_metadata:{full_name:(null==e?void 0:e.full_name)||"",avatar_url:null==e?void 0:e.avatar_url},role:(null==e?void 0:e.role)||"CLIENTE"})}return{error:null}}catch(r){let e=r.message||"Error al iniciar sesi\xf3n";return m(e),{error:e}}finally{n(!1)}},x=async(e,r,s)=>{n(!0),m(null);try{let{data:t,error:a}=await u.auth.signUp({email:e,password:r,options:{data:{full_name:s.full_name}}});if(a)throw a;if(t.user){let{error:r}=await u.from("profiles").insert([{id:t.user.id,email:e,full_name:s.full_name,role:"CLIENTE"}]);if(r)throw r;i({id:t.user.id,email:t.user.email||"",user_metadata:{full_name:s.full_name},role:"CLIENTE"})}return{error:null}}catch(r){let e=r.message||"Error al registrar el usuario";return m(e),{error:e}}finally{n(!1)}},w=async e=>{n(!0),m(null);try{let{error:r}=await u.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/update-password")});if(r)throw r;return{error:null}}catch(r){let e=r.message||"Error al enviar el correo de recuperaci\xf3n";return m(e),{error:e}}finally{n(!1)}},g=async()=>{try{i(null),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(e=>{let[r]=e.trim().split("=");document.cookie="".concat(r,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")}),u.auth.signOut().catch(e=>{}),h.push("https://hubdeseguros.github.io/v1/login/"),window.location.href="https://hubdeseguros.github.io/v1/login/"}catch(e){window.location.href="https://hubdeseguros.github.io/v1/login/"}};return(0,t.jsx)(d.Provider,{value:{user:s,loading:o,error:c,signIn:p,signUp:x,signOut:g,resetPassword:w},children:r})}function m(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth debe usarse dentro de un AuthProvider");return e}},7648:function(e,r,s){"use strict";s.d(r,{default:function(){return a.a}});var t=s(2972),a=s.n(t)}},function(e){e.O(0,[972,330,971,117,744],function(){return e(e.s=3466)}),_N_E=e.O()}]);